var l=Object.freeze,u=Object.defineProperty;var h=(t,a,s)=>a in t?u(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var n=(t,a,s)=>h(t,typeof a!="symbol"?a+"":a,s);var r=(t,a)=>l(u(t,"raw",{value:l(a||t.slice())}));function C(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}const{LitElement:w,html:d,css:x}=window.Lit;var p,m,g,f;class c extends w{constructor(){super(),this.icons=[{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/b1c9159f-6dbf-4d6e-b4ef-dc80f2bc247b/avatar_01.svg",playerClasses:["member","bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/f82388f9-4a04-408d-bb3d-5930e8d6a48a/avatar_02.svg",playerClasses:["member","bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/c5f6cccf-b641-4304-9ad0-6bfa0922a2b9/avatar_03.svg",playerClasses:["member","bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/8dede1ec-4a68-4a8d-830d-2b4727312dcb/avatar_04.svg",playerClasses:["member","bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/87774782-1c15-406a-bc7b-5e8f96e85d57/avatar_05.svg",playerClasses:["member","bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/5da42a6b-dc26-47e0-8aa1-a307de6b89a0/avatar_06.svg",playerClasses:["member","bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/3f0451fe-f516-42c8-9243-f20813470358/avatar_07.svg",playerClasses:["member","bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/eb78d2f2-5536-44f0-8e39-a9de9148cc7d/avatar_08.svg",playerClasses:["member","bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/9c0b8caa-b4a7-41e9-bbfc-bdc464a228d8/witcher.svg",playerClasses:["bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/76dd8712-78a1-488f-99cb-6a11021469c8/Super%20Mario%20icon%20Logo%20Vector.svg",playerClasses:["bronze","silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/eefe02ed-1200-4a43-b913-6080935c94a7/Spider%20Man%20Icon.svg",playerClasses:["silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/acd2fcd5-4ac0-4983-a5bb-b017273e44b5/Circle%20Avatar%20Vectors.svg",playerClasses:["silver","gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/03b450eb-1483-4103-bf64-b74d86adbc95/Batman%20Comics%20Avatar%20Icon.svg",playerClasses:["gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/d2931148-7de7-4896-bad2-91f7b1e6e369/mortal-kombat-seeklogo-3.svg",playerClasses:["gold","ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/8cfa5ee7-35fb-4a3d-9d95-f05452362994/fallout-4-icon-6.svg",playerClasses:["ambassador"]},{url:"https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/93ba1b32-91ba-48f6-8fa5-c9bb77dea95e/Group%2020.svg",playerClasses:["ambassador"]}],this.selectedIcon="",this.submissionStatus="",this.language=document.documentElement.lang||"en",this.playerClass="member",this.selectedClass=this.playerClass}firstUpdated(){this.selectedClass=this.playerClass}getTranslations(){const a={en:{submit:"Submit",saved:"Saved"},ka:{submit:"შენახვა",saved:"შენახული"},ru:{submit:"Отправить",saved:"Сохранено"},tr:{submit:"Gönder",saved:"Kaydedildi"}};return a[this.language]||a.en}getIconEligibility(){return this.icons.filter(a=>a.playerClasses.includes(this.selectedClass)).map(a=>({...a,isSelectable:a.playerClasses.includes(this.playerClass),requiredClass:a.playerClasses[0]}))}selectIcon(a,s){s&&(this.selectedIcon=a,this.submissionStatus="")}selectClass(a){this.selectedClass=a,this.selectedIcon="",this.requestUpdate()}async submitIcon(){if(!this.selectedIcon)return;const{userId:a,accessToken:s}=extractAuthDataFromCookie();if(!a||!s){console.error("Missing userId or accessToken"),this.submissionStatus="error";return}const o="\n      mutation UpdateUser($input: UpdateUserInput!) {\n        updateUser(input: $input) {\n          user {\n            avatarUri\n          }\n        }\n      }\n    ";try{const i=await(await fetch(API_URL,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({query:o,variables:{input:{avatarUri:this.selectedIcon,userId:a}}})})).json();if(i.errors)throw new Error(i.errors[0].message);this.submissionStatus="success";const v=new CustomEvent("user:update-avatar",{detail:{avatarUrl:i.data.updateUser.user.avatarUri},bubbles:!0,composed:!0});this.dispatchEvent(v);const b=document.querySelector("span.variable.user_avatar img.avatar");b?b.src=i.data.updateUser.user.avatarUri:console.warn("Avatar image element not found"),setTimeout(()=>{this.submissionStatus="",this.requestUpdate(),TMA.execute("CLOSE_CURRENT_OVERLAY")},2e3)}catch(e){this.submissionStatus="error",console.error("Error updating avatar:",e)}}render(){const a=this.getTranslations(),s=this.getIconEligibility(),o=["member","bronze","silver","gold","ambassador"];return d(f||(f=r(['\n      <div class="icon-picker">\n        <div class="toggle-group">\n          ','\n        </div>\n        <div class="icon-grid">\n          ','\n        </div>\n        <div class="submit-container">\n        <button\n          class="submit-button ','"\n          ?disabled=',"\n          @click=","\n          data-status=","\n        >\n          ","\n        </button>\n        </div>\n      </div>\n    "])),o.map(e=>d(m||(m=r(['\n              <button\n                class="toggle-button ','"\n                @click=',"\n              >\n                ","\n              </button>\n            "])),this.selectedClass===e?"selected":"",()=>this.selectClass(e),e.toUpperCase())),s.map(e=>d(g||(g=r(['\n              <div\n                class="icon-container '," ",'"\n                @click=',"\n              >\n                <img src=",' alt="Avatar icon" />\n              </div>\n            '])),this.selectedIcon===e.url&&e.isSelectable?"selected":"",e.isSelectable?"":"unselectable",()=>this.selectIcon(e.url,e.isSelectable),e.url)),this.submissionStatus,!this.selectedIcon||this.submissionStatus==="success",this.submitIcon,this.submissionStatus==="success"?a.saved:"",this.submissionStatus==="success"?a.saved:a.submit)}}n(c,"properties",{icons:{type:Array},selectedIcon:{type:String},submissionStatus:{type:String},language:{type:String,attribute:!1},playerClass:{type:String,attribute:!0},selectedClass:{type:String,state:!0}}),n(c,"styles",x(p||(p=r(['\n    .icon-picker {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: 20px 10px;\n      background-color: transparent;\n      border-radius: 8px;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n      border: 1px solid #bc1470b3;\n      --icon-width: 60px; \n    }\n    @media (max-width: 768px) {\n      .icon-picker {\n        border: none;\n      }\n    }\n    .toggle-group {\n      display: flex;\n      justify-content: center;\n      margin-bottom: 20px;\n      gap: 10px;\n      flex-wrap: wrap;\n      position: sticky;\n      top: 0px;\n      background-color: rgba(0, 0, 0, 0);\n      backdrop-filter: blur(10px);\n      -webkit-backdrop-filter: blur(10px);\n      z-index: 1;\n      padding-block: 35px 10px;\n    }\n    .toggle-button {\n      padding: 8px 16px;\n      background-color: #00000075;\n      border: 1px solid #bc1470b3;\n      border-radius: 4px;\n      cursor: pointer;\n      font-family: "Noto Sans Ambassadori";\n      font-size: 14px;\n      transition: background-color 0.2s;\n      color: white;\n    }\n    .toggle-button.selected {\n      background-color: #bc1471;\n      color: white;\n    }\n    .icon-grid {\n      display: flex;\n      flex-wrap: wrap-reverse; \n      flex-direction: row-reverse; \n      gap: 10px;\n      padding: 0px;\n      justify-content: center;\n    }\n    .icon-container {\n      cursor: pointer;\n      padding: 5px;\n      border: 2px solid transparent;\n      border-radius: 8px;\n      transition: border-color 0.2s;\n      max-width: 70px;\n      position: relative;\n      text-align: center;\n      flex: 1 0 20%;\n    }\n    .icon-container.selected {\n      border-color: #bc1471;\n      background-color: rgba(188, 20, 113, 0.1);\n    }\n    .icon-container.unselectable {\n      cursor: not-allowed;\n      pointer-events: none;\n      position: relative;\n      &:before { \n      content: url(\'https://www.ambassadoribet.com/_internal/ts-images/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/fc10bf3d-5087-4a6d-b98d-dc16baa84cf3/lock.svg\');\n      position: absolute;\n      inset: 0;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 1;\n      }\n      img {\n        opacity: 0.6;\n        filter: grayscale(30%) brightness(60%);\n      }\n    }\n    .icon-container img {\n      width: var(--icon-width, 60px);\n      height: var(--icon-width, 60px);\n      min-width: var(--icon-width, 60px);\n      min-height: var(--icon-width, 60px);\n      max-width: var(--icon-width, 60px);\n      max-height: var(--icon-width, 60px);\n      height: auto;\n      border-radius: 0;\n    }\n    .submit-container {\n      position: sticky;\n      bottom: 0px;\n      background-color: rgba(0, 0, 0, 0);\n      backdrop-filter: blur(10px);\n      -webkit-backdrop-filter: blur(10px);\n      width: 100%;\n      display: flex;\n      justify-content: center;\n      padding-bottom: 20px;\n    }\n    .submit-button {\n      margin-top: 25px;\n      padding: 8px 16px;\n      background-color: #bc1471;\n      color: white;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 16px;\n      position: relative;\n      font-family: "Noto Sans Ambassadori";\n      transition: background-color 0.3s;\n    }\n    .submit-button:disabled {\n      background-color: #cccccc;\n      cursor: not-allowed;\n    }\n    .submit-button.success {\n      background-color: #28a745;\n    }\n    .submit-button::after {\n      content: attr(data-status);\n      position: absolute;\n      top: -20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background-color: rgba(0, 0, 0, 0.8);\n      color: white;\n      padding: 4px 8px;\n      border-radius: 4px;\n      font-size: 12px;\n      font-family: "Noto Sans Ambassadori";\n      opacity: 0;\n      transition: opacity 0.3s;\n    }\n    .submit-button.success::after {\n      content: attr(data-status);\n      opacity: 1;\n    }\n  ']))));customElements.define("user-icon-picker",c);export{C as __vite_legacy_guard};
//# sourceMappingURL=iconPicker.js.map
