var g=Object.freeze,m=Object.defineProperty;var L=(l,t,e)=>t in l?m(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var u=(l,t,e)=>L(l,typeof t!="symbol"?t+"":t,e);var o=(l,t)=>g(m(l,"raw",{value:g(t||l.slice())}));function N(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}const{LitElement:k,html:h,css:I}=window.Lit;var v,f,w,S,b,x,y,E,T,A;class p extends k{constructor(){super(),this.lang=this.getQueryParam("lang","en"),this.page=this.getQueryParam("page","home"),this.slidesData=[],this.error=null,this.currentSlide=0,this.isDragging=!1,this.totalSlides=0,this.startX=0,this.currentTranslate=0,this.prevTranslate=0,this.autoSlideInterval=null,this.autoSlideIntervalTime=8e3,this.slideWidth=100,this.pxToVw=100/window.innerWidth,this.dragThreshold=20*this.pxToVw,this.slideChangeThreshold=100*this.pxToVw,this.retryAttempts=0,this.maxRetryAttempts=10,this._slidesEl=null,this._listenersAttached=!1,this._rafId=null,this._pendingTranslate=null,this.dragStart=t=>{if(t.target.closest("a"))return;this.isDragging=!0,this.stopAutoSlide();const e=this.renderRoot.querySelector(".slides");e&&(e.style.transition="none"),t.type.startsWith("touch")?this.startX=t.touches[0].clientX:(this.startX=t.clientX,typeof t.pointerId<"u"&&(e==null||e.setPointerCapture(t.pointerId)))},this.dragMove=t=>{if(!this.isDragging)return;let e;t.type.startsWith("touch")?(e=t.touches[0].clientX,t.preventDefault()):e=t.clientX;const i=(e-this.startX)*this.pxToVw;this.currentTranslate=this.prevTranslate+i,this._pendingTranslate=this.currentTranslate,this._rafId==null&&(this._rafId=requestAnimationFrame(()=>{const r=this.renderRoot.querySelector(".slides");r&&this._pendingTranslate!=null&&(r.style.transform="translateX(".concat(this._pendingTranslate,"vw)")),this._rafId=null}))},this.dragEnd=t=>{if(!this.isDragging)return;this.isDragging=!1;const e=this.renderRoot.querySelector(".slides");!t.type.startsWith("touch")&&typeof t.pointerId<"u"&&(e==null||e.releasePointerCapture(t.pointerId));let i;t.type.startsWith("touch")?i=t.changedTouches[0].clientX:i=t.clientX;const r=(i-this.startX)*this.pxToVw;if(Math.abs(r)<this.dragThreshold){const s=this.renderRoot.elementFromPoint(i,t.type.startsWith("touch")?t.changedTouches[0].clientY:t.clientY);s&&!s.closest("a")&&setTimeout(()=>s.click(),0)}else r<-this.slideChangeThreshold&&this.currentSlide<this.totalSlides-1?this.currentSlide++:r>this.slideChangeThreshold&&this.currentSlide>0&&this.currentSlide--;this._rafId!=null&&(cancelAnimationFrame(this._rafId),this._rafId=null,this._pendingTranslate=null),this.showSlide(this.currentSlide),this.startAutoSlide()}}createRenderRoot(){const t=this.attachShadow({mode:"open"}),e=document.createElement("style");return e.textContent=this.constructor.styles.toString(),t.appendChild(e),t}connectedCallback(){super.connectedCallback(),window.__carouselLoadedOnce||(sessionStorage.removeItem("image-carousel-slides-cache"),window.__carouselLoadedOnce=!0),this.fetchSlides().then(()=>this.requestUpdate()),this.startAutoSlide()}disconnectedCallback(){super.disconnectedCallback(),this.stopAutoSlide(),this._rafId!=null&&(cancelAnimationFrame(this._rafId),this._rafId=null,this._pendingTranslate=null),this.removeEventListeners()}updated(){var t;((t=this.slidesData)==null?void 0:t.length)>0&&this.setupEventListeners()}getQueryParam(t,e=""){return new URLSearchParams(window.location.search).get(t)||e}fixUrl(t){return t.replace(/ /g,"%20")}async fetchSlides(){var s;const t="image-carousel-slides-cache",e=sessionStorage.getItem(t);if(e)try{const a=JSON.parse(e);this.slidesData=a.filter(n=>n.pages.includes(this.page)).sort((n,d)=>n.sortOrder-d.sortOrder),this.totalSlides=this.slidesData.length;return}catch(a){console.warn("Invalid cached data. Refetching.")}const i="https://cdn.takeshape.io/project/5da2b4d5-59f6-412a-82c3-f6a272b532be/production/graphql",r="dde685a904334d79915c7a9f31860f36";try{const a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json","X-TakeShape-Token":r},body:JSON.stringify({query:"\n          query GetSlides($locale: String!) {\n            getSlideList(locale: $locale, onlyEnabled: true, size: 200) {\n              items {\n                caption\n                pages\n                sortOrder\n                NavigateVar\n                OptionalHref\n                NavigateParams\n                image { path }\n                imageMobile { path }\n              }\n            }\n          }\n        ",variables:{locale:this.lang}}),cache:"no-store"});if(!a.ok)throw new Error("HTTP error! Status: ".concat(a.status));const{data:n}=await a.json(),d=((s=n==null?void 0:n.getSlideList)==null?void 0:s.items)||[];sessionStorage.setItem(t,JSON.stringify(d)),this.slidesData=d.filter(c=>c.pages.includes(this.page)).sort((c,_)=>c.sortOrder-_.sortOrder),this.totalSlides=this.slidesData.length}catch(a){this.error=a.message}}setupEventListeners(){var i;const t=this.renderRoot.querySelector(".slides");if(!t){this.retryAttempts<this.maxRetryAttempts&&((i=this.slidesData)==null?void 0:i.length)>0&&(this.retryAttempts++,setTimeout(()=>this.setupEventListeners(),100));return}if(this.retryAttempts=0,this._slidesEl&&this._slidesEl!==t&&(this.removeEventListeners(),this._listenersAttached=!1),this._slidesEl=t,this._listenersAttached)return;window.matchMedia("(pointer: coarse)").matches?(t.addEventListener("touchstart",this.dragStart,{passive:!1}),t.addEventListener("touchmove",this.dragMove,{passive:!1}),t.addEventListener("touchend",this.dragEnd,{passive:!0}),t.addEventListener("touchcancel",this.dragEnd,{passive:!0})):(t.addEventListener("pointerdown",this.dragStart,{passive:!0}),t.addEventListener("pointermove",this.dragMove,{passive:!0}),t.addEventListener("pointerup",this.dragEnd,{passive:!0}),t.addEventListener("pointercancel",this.dragEnd,{passive:!0})),this._listenersAttached=!0}removeEventListeners(){const t=this._slidesEl||this.renderRoot.querySelector(".slides");t&&(t.removeEventListener("touchstart",this.dragStart),t.removeEventListener("touchmove",this.dragMove),t.removeEventListener("touchend",this.dragEnd),t.removeEventListener("touchcancel",this.dragEnd),t.removeEventListener("pointerdown",this.dragStart),t.removeEventListener("pointermove",this.dragMove),t.removeEventListener("pointerup",this.dragEnd),t.removeEventListener("pointercancel",this.dragEnd),this._listenersAttached=!1)}showSlide(t){const e=this.renderRoot.querySelector(".slides");e&&(e.style.transition="transform 0.5s ease",e.style.transform="translateX(".concat(-this.slideWidth*t,"vw)")),this.currentSlide=t,this.prevTranslate=-this.slideWidth*t,this.requestUpdate()}startAutoSlide(){this.stopAutoSlide(),this.autoSlideInterval=setInterval(()=>{const t=(this.currentSlide+1)%this.totalSlides;this.showSlide(t)},this.autoSlideIntervalTime)}stopAutoSlide(){this.autoSlideInterval&&(clearInterval(this.autoSlideInterval),this.autoSlideInterval=null)}handleNavigate(t){if(!window.TMA||typeof window.TMA.navigate!="function"){console.warn("TMA.navigate is not available");return}const{NavigateVar:e,NavigateParams:i,OptionalHref:r}=t;try{if(i&&typeof i=="string"&&i.startsWith("game/")){const s=i.split("/");if(s.length===3&&s[1]&&s[2]){const[,a,n]=s;window.TMA.navigate("GAME",{gameStudio:a,gameSlug:n});return}}if(e&&e!=="NULL"&&e!=="null"){window.TMA.navigate(e);return}console.debug("No TMA navigation triggered, relying on OptionalHref:",r)}catch(s){console.error("Error processing navigation:",s)}}renderSlide(t){const e="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(t.image.path)),i="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(t.imageMobile.path)),r=h(w||(w=o(['\n      <div class="slide-content">\n        <picture>\n          <source media="(max-width: 768px)" srcset='," />\n          <img src=",' alt="Slide Image" loading="lazy" />\n        </picture>\n        ',"\n      </div>\n    "])),i,e,t.OptionalHref?h(f||(f=o(["\n              <a\n                href=","\n                aria-label=",'\n                draggable="false"\n                @click=',"\n              ></a>\n            "])),t.OptionalHref,t.caption||"Navigate to slide link",s=>{var a,n;s.preventDefault(),s.stopPropagation();try{if(t.NavigateParams&&typeof t.NavigateParams=="string"&&t.NavigateParams.startsWith("game/")){const[,d,c]=t.NavigateParams.split("/");if(d&&c&&((a=window.TMA)!=null&&a.navigate)){window.TMA.navigate("GAME",{gameStudio:d,gameSlug:c});return}}if(t.NavigateVar&&t.NavigateVar!=="NULL"&&((n=window.TMA)!=null&&n.navigate)){window.TMA.navigate(t.NavigateVar);return}t.OptionalHref&&(history.pushState({},"",t.OptionalHref),window.dispatchEvent(new Event("popstate")))}catch(d){console.error("Slide navigation error:",d)}}):"");return h(x||(x=o(['\n      <div class="slide">\n        ',"\n      </div>\n    "])),t.OptionalHref?h(S||(S=o(["",""])),r):h(b||(b=o(["\n              <div @click=",">\n                ","\n              </div>\n            "])),()=>this.handleNavigate(t),r))}render(){return this.error?h(y||(y=o(['\n        <div class="error-message">\n          <p>Error fetching slides: ',"</p>\n        </div>\n      "])),this.error):!this.slidesData||this.slidesData.length===0?h(E||(E=o(['\n        <div class="no-slides-message">\n          <p></p>\n        </div>\n      ']))):h(A||(A=o(['\n      <div class="carousel" style="--slide-interval: ','ms">\n        <div class="counter">'," / ",'</div>\n        <div class="slides" style="width: ','vw">\n          ','\n        </div>\n        <button\n          class="nav-button prev"\n          @click=','\n          aria-label="Previous slide"\n        >\n          ❮\n        </button>\n        <button\n          class="nav-button next"\n          @click=','\n          aria-label="Next slide"\n        >\n          ❯\n        </button>\n        <div class="indicators">\n          ',"\n        </div>\n      </div>\n    "])),this.autoSlideIntervalTime,this.currentSlide+1,this.totalSlides,this.slideWidth*this.totalSlides,this.slidesData.map(t=>this.renderSlide(t)),()=>{const t=this.currentSlide===0?this.totalSlides-1:this.currentSlide-1;this.showSlide(t),this.startAutoSlide()},()=>{const t=(this.currentSlide+1)%this.totalSlides;this.showSlide(t),this.startAutoSlide()},this.slidesData.map((t,e)=>h(T||(T=o(["\n              <span\n                class=","\n                @click=","\n              ></span>\n            "])),"indicator-dot ".concat(e===this.currentSlide?"active":""),()=>{this.showSlide(e),this.startAutoSlide()})))}}u(p,"properties",{lang:{type:String,reflect:!0},page:{type:String,reflect:!0},slidesData:{type:Array,state:!0},error:{type:String,state:!0},currentSlide:{type:Number,state:!0},isDragging:{type:Boolean,state:!0},totalSlides:{type:Number,state:!0}}),u(p,"styles",I(v||(v=o(["\n\n    :host {\n      display: block;\n      margin: 0;\n      padding: 0;\n    }\n\n    .carousel {\n      width: 100vw;\n      margin: auto;\n      position: relative;\n      overflow: hidden;\n      user-select: none;\n    }\n\n    @media (max-width: 768px) {\n      .carousel {\n        width: 100vw;\n        border-radius: 10px;\n        scale: .95;\n      }\n      .slide {\n        min-width: 50vw;\n      }\n    }\n\n    .slides {\n      display: flex;\n      transition: transform 0.5s ease;\n      will-change: transform;\n    }\n\n    .slide {\n      min-width: 100vw;\n      box-sizing: border-box;\n      text-align: center;\n      position: relative;\n      cursor: grab;\n    }\n\n    .slide img {\n      width: 100%;\n      height: auto;\n      display: block;\n      -webkit-user-drag: none;\n      user-select: none;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n    }\n\n    .caption {\n      margin-top: 10px;\n      font-size: 1.2em;\n    }\n\n    .nav-button {\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      background: #1C091A;\n      outline: 1px solid rgba(255, 255, 255, 0.2);\n      color: white;\n      width: 32px;\n      height: 32px;\n      border: none;\n      padding: 0px;\n      cursor: pointer;\n      z-index: 10;\n      border-radius: 60px;\n      text-align: center;\n    }\n\n    .prev {\n      left: 25px;\n    }\n\n    .next {\n      right: 25px;\n    }\n\n    .slide a {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 50%;\n      height: 50%;\n      z-index: 10;\n      text-decoration: none;\n      color: transparent;\n      cursor: pointer;\n      pointer-events: auto;\n      -webkit-user-drag: none;\n      -moz-user-drag: none;\n      -ms-user-drag: none;\n      touch-action: auto;\n    }\n\n    .slide a:hover,\n    .slide a:active {\n      pointer-events: auto;\n    }\n\n    @media (max-width: 768px) {\n      .carousel img {\n        height: 220px;\n        object-fit: cover;\n      }\n      .slide a {\n        width: 60%;\n        height: 60%;\n      }\n      .prev {\n      left: 10px;\n    }\n\n    .next {\n      right: 10px;\n    }\n    }\n    picture {\n      position: relative;\n      z-index: 1;\n    }\n\n    .indicators {\n      position: absolute;\n      bottom: 5%;\n      width: 100%;\n      text-align: center;\n      z-index: 100;\n    }\n\n    .indicator-dot {\n      display: inline-block;\n      width: 4px;\n      height: 4px;\n      background-color: rgba(255, 255, 255, 0.5);\n      border-radius: 50px;\n      margin: 0 1px;\n      cursor: pointer;\n      transition: background-color 0.3s;\n      position: relative;\n    }\n\n    .indicator-dot.active {\n      background-color: rgba(255, 255, 255, 0.5);\n      width: 50px;\n      @media (min-width: 768px) {\n        width: 90px;\n      }\n      &:before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 0%;\n        height: 100%;\n        border-radius: 50px;\n        background-color: rgba(255, 255, 255, 1);\n        animation: widthGrow var(--slide-interval) linear;\n      }\n    }\n    @keyframes widthGrow {\n      0% {\n        width: 0;\n      }\n      100% {\n        width: 100%;\n      }\n    }\n    .counter {\n      position: absolute;\n      top: 5%;\n      right: 3%;\n      background: #0000005e;\n      color: white;\n      padding: 11px 16px;\n      border-radius: 42px;\n      z-index: 100;\n      font-family: 'Noto Sans Ambassadori';\n      font-size: 14px;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n    }\n\n    @media (max-width: 768px) {\n      .counter {\n        font-size: 10px;\n        padding: 7px 10px;\n        background: #00000091;\n        right: 10px;\n      }\n      .indicator-dot {\n        width: 4px;\n      }\n    }\n\n    .slide-content {\n      position: relative;\n      width: 100%;\n      height: 100%;\n    }\n  "]))));customElements.define("image-carousel",p);export{N as __vite_legacy_guard};
//# sourceMappingURL=image-carousel-2.js.map
