var T=Object.freeze,_=Object.defineProperty;var X=(h,o,e)=>o in h?_(h,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[o]=e;var u=(h,o,e)=>X(h,typeof o!="symbol"?o+"":o,e);var a=(h,o)=>T(_(h,"raw",{value:T(o||h.slice())}));function I(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}const{LitElement:q,html:d,css:W}=window.Lit;var k,P,L,M,C,A,D,$,R,z,N;class w extends q{constructor(){super();u(this,"handleResize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.updateMaxTranslate(),this.showSlide(this.currentSlide),this.setupPopupHover()},100)});u(this,"dragStart",e=>{if(e.target.closest("a"))return;this.isDragging=!0;const t=this._slidesContainerEl||this.renderRoot.querySelector(".slides");t&&(t.style.transition="none"),e.type.startsWith("touch")?this.startX=e.touches[0].clientX:(this.startX=e.clientX,typeof e.pointerId<"u"&&(t==null||t.setPointerCapture(e.pointerId)))});u(this,"dragMove",e=>{if(!this.isDragging)return;let t;e.type.startsWith("touch")?(t=e.touches[0].clientX,e.preventDefault()):t=e.clientX;const s=t-this.startX;let i=this.prevTranslate+s;i=Math.min(0,Math.max(-this.maxTranslate,i)),this.currentTranslate=i,this._pendingTranslate=this.currentTranslate,this._rafScheduled||(this._rafScheduled=!0,this._rafId=requestAnimationFrame(()=>{const r=this._slidesContainerEl||this.renderRoot.querySelector(".slides");r&&(r.style.transform="translateX(".concat(this._pendingTranslate,"px)")),this._rafScheduled=!1}))});u(this,"dragEnd",e=>{if(!this.isDragging)return;this.isDragging=!1;const t=this._slidesContainerEl||this.renderRoot.querySelector(".slides");!e.type.startsWith("touch")&&typeof e.pointerId<"u"&&(t==null||t.releasePointerCapture(e.pointerId));let s;e.type.startsWith("touch")?s=e.changedTouches[0].clientX:s=e.clientX;const i=s-this.startX;if(Math.abs(i)<this.dragThreshold){const r=this.renderRoot.elementFromPoint(s,e.type.startsWith("touch")?e.changedTouches[0].clientY:e.clientY);r&&!r.closest("a")&&setTimeout(()=>r.click(),0)}else{const r=Math.max(0,this.totalSlides-this.visibleSlides);i<-this.slideChangeThreshold&&this.currentSlide<r?this.currentSlide++:i>this.slideChangeThreshold&&this.currentSlide>0&&this.currentSlide--}this.showSlide(this.currentSlide)});this.lang=this.getQueryParam("lang","en"),this.page=this.getQueryParam("page","home"),this.slidesData=[],this.error=null,this.currentSlide=0,this.isDragging=!1,this.totalSlides=0,this.startX=0,this.currentTranslate=0,this.prevTranslate=0,this.slideWidth=188,this.visibleSlides=3,this.maxTranslate=0,this.dragThreshold=20,this.slideChangeThreshold=50,this.retryAttempts=0,this.maxRetryAttempts=10,this._listenersAttached=!1,this._slidesContainerEl=null,this._isTouchDevice=!1,this._rafId=0,this._rafScheduled=!1,this._pendingTranslate=0}createRenderRoot(){const e=this.attachShadow({mode:"open"}),t=document.createElement("style");return t.textContent=this.constructor.styles.toString(),e.appendChild(t),e}connectedCallback(){super.connectedCallback(),this.fetchSlides(),window.addEventListener("resize",this.handleResize)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListeners(),this.cleanupPopupHover(),window.removeEventListener("resize",this.handleResize),this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=void 0),this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=0,this._rafScheduled=!1)}firstUpdated(){var e;((e=this.slidesData)==null?void 0:e.length)>0&&(this.updateMaxTranslate(),this.showSlide(this.currentSlide),this.setupEventListeners(),this.setupPopupHover())}updated(e){var t;((t=this.slidesData)==null?void 0:t.length)>0&&(this.setupEventListeners(),this.setupPopupHover(),this.updateMaxTranslate(),this.updateShadowOpacity())}updateShadowOpacity(){this.style.setProperty("--left-shadow-opacity",this.currentSlide>0?"1":"0"),this.style.setProperty("--right-shadow-opacity",this.currentSlide<this.totalSlides-this.visibleSlides?"1":"0")}updateMaxTranslate(){const e=this.renderRoot.querySelector(".carousel");if(!e)return;const t=e.offsetWidth;this.visibleSlides=Math.floor(t/this.slideWidth),this.maxTranslate=Math.max(0,(this.totalSlides-this.visibleSlides)*this.slideWidth)}setupPopupHover(){const e=this.renderRoot.querySelector(".carousel"),t=this.renderRoot.querySelector(".popup"),s=this.renderRoot.querySelectorAll(".slider-holder");!e||!t||!s.length||s.forEach((i,r)=>{const c=this.slidesData[r];if(!c)return;const n="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(c.imageMobile.path));i._popupData={carousel:e,popup:t,mobileImageUrl:n},i._updatePopup||(i._updatePopup=()=>{const l=i._popupData;if(!l)return;const{carousel:p,popup:g,mobileImageUrl:b}=l,f=p.getBoundingClientRect(),S=i.getBoundingClientRect(),x=window.innerWidth,y=371,v=10;let m=S.left-f.left+S.width/2-y/2;const E=f.left+m;E<v?m=v-f.left:E+y>x-v&&(m=x-v-y-f.left),p.style.setProperty("--hovered-background",'url("'.concat(b,'")')),g.style.left="".concat(m,"px"),g.style.opacity="1"},i._resetPopup=()=>{const l=i._popupData;if(!l)return;const{carousel:p,popup:g}=l;p.style.removeProperty("--hovered-background"),g.style.opacity="0"},i.addEventListener("mouseenter",i._updatePopup),i.addEventListener("mouseleave",i._resetPopup))})}cleanupPopupHover(){var t,s;const e=(s=(t=this.renderRoot)==null?void 0:t.querySelectorAll)==null?void 0:s.call(t,".slider-holder");!e||!e.length||e.forEach(i=>{i._updatePopup&&i.removeEventListener("mouseenter",i._updatePopup),i._resetPopup&&i.removeEventListener("mouseleave",i._resetPopup),delete i._updatePopup,delete i._resetPopup,delete i._popupData})}getQueryParam(e,t=""){return new URLSearchParams(window.location.search).get(e)||t}fixUrl(e){return e.replace(/ /g,"%20")}async fetchSlides(){var s;const e="https://cdn.takeshape.io/project/5da2b4d5-59f6-412a-82c3-f6a272b532be/production/graphql",t="dde685a904334d79915c7a9f31860f36";try{const i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-TakeShape-Token":t},body:JSON.stringify({query:"\n            query GetSlides($locale: String!) {\n              getSlideList(locale: $locale, onlyEnabled: true, size: 200) {\n                items {\n                  caption\n                  pages\n                  sortOrder\n                  NavigateVar\n                  OptionalHref\n                  NavigateParams\n                  image {\n                    path\n                  }\n                  imageMobile {\n                    path\n                  }\n                  imagePromos {\n                    path\n                  }\n                }\n              }\n            }\n          ",variables:{locale:this.lang}})});if(!i.ok)throw new Error("HTTP error! Status: ".concat(i.status));const{data:r}=await i.json(),c=((s=r==null?void 0:r.getSlideList)==null?void 0:s.items)||[];this.slidesData=c.filter(n=>n.pages.includes(this.page)).sort((n,l)=>n.sortOrder-l.sortOrder),this.totalSlides=this.slidesData.length,this.requestUpdate()}catch(i){this.error=i.message,this.requestUpdate()}}setupEventListeners(){var t;const e=this.renderRoot.querySelector(".slides");if(!e){this.retryAttempts<this.maxRetryAttempts&&((t=this.slidesData)==null?void 0:t.length)>0&&(this.retryAttempts++,setTimeout(()=>this.setupEventListeners(),100));return}this.retryAttempts=0,this._slidesContainerEl&&this._slidesContainerEl!==e&&this.removeEventListeners(),!this._listenersAttached&&(this._slidesContainerEl=e,this._isTouchDevice=window.matchMedia("(pointer: coarse)").matches,this._isTouchDevice?(e.addEventListener("touchstart",this.dragStart,{passive:!1}),e.addEventListener("touchmove",this.dragMove,{passive:!1}),e.addEventListener("touchend",this.dragEnd),e.addEventListener("touchcancel",this.dragEnd)):(e.addEventListener("pointerdown",this.dragStart,{passive:!1}),e.addEventListener("pointermove",this.dragMove,{passive:!1}),e.addEventListener("pointerup",this.dragEnd),e.addEventListener("pointercancel",this.dragEnd)),this._listenersAttached=!0)}removeEventListeners(){const e=this._slidesContainerEl||this.renderRoot.querySelector(".slides");if(!e||!this._listenersAttached){this._slidesContainerEl=null,this._listenersAttached=!1;return}this._isTouchDevice?(e.removeEventListener("touchstart",this.dragStart),e.removeEventListener("touchmove",this.dragMove),e.removeEventListener("touchend",this.dragEnd),e.removeEventListener("touchcancel",this.dragEnd)):(e.removeEventListener("pointerdown",this.dragStart),e.removeEventListener("pointermove",this.dragMove),e.removeEventListener("pointerup",this.dragEnd),e.removeEventListener("pointercancel",this.dragEnd)),this._listenersAttached=!1,this._slidesContainerEl=null}showSlide(e){const t=Math.max(0,this.totalSlides-this.visibleSlides);e=Math.max(0,Math.min(e,t));const s=this.renderRoot.querySelector(".slides");if(s){s.style.transition="transform 0.3s ease";const i=-e*this.slideWidth;s.style.transform="translateX(".concat(i,"px)")}this.currentSlide=e,this.prevTranslate=-e*this.slideWidth,this.updateShadowOpacity(),this.requestUpdate()}handleNavigate(e){if(!window.TMA||typeof window.TMA.navigate!="function")return;const{NavigateVar:t,NavigateParams:s,OptionalHref:i}=e;try{if(s&&typeof s=="string"&&s.startsWith("game/")){const r=s.split("/");if(r.length===3&&r[1]&&r[2]){const[,c,n]=r;window.TMA.navigate("GAME",{gameStudio:c,gameSlug:n});return}}if(t&&t!=="NULL"&&t!=="null"){window.TMA.navigate(t);return}console.debug("No TMA navigation triggered, relying on OptionalHref:",i)}catch(r){console.error("Error processing navigation:",r)}}renderSlide(e){const t="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(e.imagePromos&&e.imagePromos.path?e.imagePromos.path:e.image.path)),s="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(e.imageMobile.path)),i=d(L||(L=a(["\n      <div\n        style=\"--hover-image: url('",'\')"\n        class="slide-content"\n      >\n        <img src=',' alt="Slide Image" loading="lazy" />\n        ',"\n      </div>\n    "])),s,t,e.OptionalHref?d(P||(P=a(["\n              <a\n                href=","\n                aria-label=",'\n                draggable="false"\n                @click=',"\n              ></a>\n            "])),e.OptionalHref,e.caption||"Navigate to slide link",r=>{var c,n,l;if(r.preventDefault(),r.stopPropagation(),(c=e.NavigateParams)!=null&&c.startsWith("game/")){const p=e.NavigateParams.split("/");if(p.length===3&&p[1]&&p[2]&&((n=window.TMA)!=null&&n.navigate)){const[,g,b]=p;window.TMA.navigate("GAME",{gameStudio:g,gameSlug:b});return}}if(e.NavigateVar&&e.NavigateVar!=="NULL"&&e.NavigateVar!=="null"&&((l=window.TMA)!=null&&l.navigate)){window.TMA.navigate(e.NavigateVar);return}window.location.href!==e.OptionalHref&&(history.pushState({},"",e.OptionalHref),window.dispatchEvent(new Event("popstate")))}):"");return d(A||(A=a(['\n      <div class="slide">\n        ',"\n      </div>\n    "])),e.OptionalHref?d(M||(M=a(["",""])),i):d(C||(C=a(["\n              <div @click=",">","</div>\n            "])),()=>this.handleNavigate(e),i))}render(){return this.error?d(D||(D=a(['\n        <div class="error-message">\n          <p>Error fetching slides: ',"</p>\n        </div>\n      "])),this.error):!this.slidesData||this.slidesData.length===0?d($||($=a(['\n        <div class="no-slides-message">\n          <p></p>\n        </div>\n      ']))):d(N||(N=a(['\n      <div class="carousel">\n        <div class="slides-container">\n          <div class="slides">\n            ','\n          </div>\n        </div>\n        <div class="popup">\n          <div class="popup-background"></div>\n        </div>\n        ',"\n      </div>\n    "])),this.slidesData.map(e=>d(R||(R=a(['\n                <div class="slider-holder">',"</div>\n              "])),this.renderSlide(e))),this.totalSlides>this.visibleSlides?d(z||(z=a(['\n              <button\n                class="nav-button prev"\n                @click=','\n                aria-label="Previous slide"\n                ?disabled=','\n              >\n                ❮\n              </button>\n              <button\n                class="nav-button next"\n                @click=','\n                aria-label="Next slide"\n                ?disabled=',"\n              >\n                ❯\n              </button>\n            "])),()=>{this.currentSlide>0&&this.showSlide(this.currentSlide-1)},this.currentSlide===0,()=>{this.currentSlide<this.totalSlides-this.visibleSlides&&this.showSlide(this.currentSlide+1)},this.currentSlide>=this.totalSlides-this.visibleSlides):"")}}u(w,"properties",{lang:{type:String,reflect:!0},page:{type:String,reflect:!0},slidesData:{type:Array,state:!0},error:{type:String,state:!0},currentSlide:{type:Number,state:!0},isDragging:{type:Boolean,state:!0},totalSlides:{type:Number,state:!0}}),u(w,"styles",W(k||(k=a(['\n\n    :host {\n      display: block;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      --left-shadow-opacity: 0;\n      --right-shadow-opacity: 0;\n      --hovered-background: none;\n    }\n\n    .carousel {\n      width: 100%;\n      position: relative;\n      user-select: none;\n      box-sizing: border-box;\n      overflow: visible;\n    }\n\n    .slides-container {\n      overflow: hidden;\n      position: relative;\n    }\n\n    .slides {\n      display: flex;\n      transition: transform 0.3s ease;\n      will-change: transform;\n      gap: 8px;\n      padding: 10px 0;\n    }\n\n    .carousel::before,\n    .carousel::after {\n      content: "";\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 50px;\n      z-index: 100;\n      pointer-events: none;\n      transition: opacity 0.3s ease;\n    }\n\n    .carousel::before {\n      left: 0;\n      background: linear-gradient(to right, rgba(0, 0, 0, 1), transparent);\n      opacity: var(--left-shadow-opacity);\n    }\n\n    .carousel::after {\n      right: 0;\n      background: linear-gradient(to left, rgba(0, 0, 0, 1), transparent);\n      opacity: var(--right-shadow-opacity);\n    }\n\n    .slide {\n      flex: 0 0 180px;\n      height: 100%;\n      box-sizing: border-box;\n      position: relative;\n      cursor: grab;\n      border-radius: 8px;\n      overflow: hidden;\n    }\n\n    .slide img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      display: block;\n      user-drag: none;\n      -webkit-user-drag: none;\n      user-select: none;\n      height: 50px;\n      width: 180px;\n    }\n\n    .nav-button {\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      background: #cf167d;\n      color: white;\n      border: none;\n      padding: 10px;\n      cursor: pointer;\n      z-index: 150;\n      border-radius: 50%;\n      width: 28px;\n      height: 28px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 16px;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n\n    .carousel:hover .nav-button {\n      opacity: 1;\n    }\n\n    .nav-button:disabled {\n      opacity: 0;\n      cursor: not-allowed;\n    }\n\n    .carousel:hover .nav-button:disabled {\n      opacity: 0;\n      cursor: not-allowed;\n    }\n\n    .prev {\n      left: 8px;\n    }\n\n    .next {\n      right: 8px;\n    }\n\n    .slide a {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 10;\n      text-decoration: none;\n      color: transparent;\n      cursor: pointer;\n      pointer-events: auto;\n      user-drag: none;\n      -webkit-user-drag: none;\n      draggable: false;\n      touch-action: auto;\n    }\n\n    picture {\n      position: relative;\n      z-index: 1;\n    }\n\n    .slide-content::before {\n      content: "";\n      position: absolute;\n      display: block !important;\n      inset: 0;\n      padding: 2px;\n      border-radius: 8px;\n      background: linear-gradient(180deg, #fca21e -38.69%, #ff84e6 125%);\n      -webkit-mask: linear-gradient(#fff 0 0) content-box,\n        linear-gradient(#fff 0 0);\n      -webkit-mask-composite: xor;\n      mask-composite: exclude;\n      pointer-events: none;\n    }\n\n    .popup {\n      position: absolute;\n      top: 100%;\n      left: 0;\n      z-index: 200;\n      pointer-events: none;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n      margin-top: 14px;\n      width: 371px;\n      height: 210px;\n    }\n\n    .popup:before {\n      content: "";\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: var(--hovered-background, none);\n      background-size: cover;\n      background-position: center;\n      border-radius: 20px;\n      padding: 3px;\n      z-index: 1;\n      scale: .98;\n      transform: translateX(-1px);\n    }\n\n    .popup:after {\n      content: "";\n      position: absolute;\n      top: 0;\n      left: 50%;\n      transform: translateX(-50%) translateY(-50%) rotate(45deg);\n      width: 20px;\n      height: 20px;\n      background: linear-gradient(328deg, #fca21e 50%, #ff84e6);\n      z-index: 0;\n    }\n\n    .popup-background {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: calc(100% - 4px);\n      background: linear-gradient(#FCA21E, #FF84E6);\n      z-index: 0;\n      border-radius: 20px;\n      padding-block: 5px;\n      padding-inline: 2px;\n    }\n\n    .slider-holder {\n      position: relative;\n    }\n  ']))));customElements.define("promo-carousel",w);export{I as __vite_legacy_guard};
//# sourceMappingURL=promo-carousel-3.js.map
