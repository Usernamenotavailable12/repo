var p=Object.freeze,u=Object.defineProperty;var k=(n,t,e)=>t in n?u(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var h=(n,t,e)=>k(n,typeof t!="symbol"?t+"":t,e);var a=(n,t)=>p(u(n,"raw",{value:p(t||n.slice())}));function D(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}const{LitElement:L,html:o,css:M}=window.Lit;var g,f,m,b,v,y,S,w,x,E;class c extends L{constructor(){super(),this.lang=this.getQueryParam("lang","en"),this.page=this.getQueryParam("page","home"),this.slidesData=[],this.error=null,this.currentSlide=0,this.isDragging=!1,this.totalSlides=0,this.startX=0,this.currentTranslate=0,this.prevTranslate=0,this.slideWidth=128,this.visibleSlides=3,this.maxTranslate=0,this.dragThreshold=20,this.slideChangeThreshold=50,this.retryAttempts=0,this.maxRetryAttempts=10}createRenderRoot(){const t=this.attachShadow({mode:"open"}),e=document.createElement("style");return e.textContent=this.constructor.styles.toString(),t.appendChild(e),t}connectedCallback(){super.connectedCallback(),this.fetchSlides().then(()=>{this.updateMaxTranslate(),this.showSlide(this.currentSlide),this.requestUpdate()})}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListeners()}updated(){var t;((t=this.slidesData)==null?void 0:t.length)>0&&(this.setupEventListeners(),this.updateMaxTranslate())}updateMaxTranslate(){this.maxTranslate=Math.max(0,(this.totalSlides-this.visibleSlides)*this.slideWidth)}getQueryParam(t,e=""){return new URLSearchParams(window.location.search).get(t)||e}fixUrl(t){return t.replace(/ /g,"%20")}async fetchSlides(){var i;const t="https://cdn.takeshape.io/project/5da2b4d5-59f6-412a-82c3-f6a272b532be/production/graphql",e="dde685a904334d79915c7a9f31860f36";try{const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-TakeShape-Token":e},body:JSON.stringify({query:"\n            query GetSlides($locale: String!) {\n              getSlideList(locale: $locale) {\n                items {\n                  caption\n                  pages\n                  sortOrder\n                  NavigateVar\n                  OptionalHref\n                  NavigateParams\n                  image {\n                    path\n                  }\n                  imageMobile {\n                    path\n                  }\n                }\n              }\n            }\n          ",variables:{locale:this.lang}})});if(!r.ok)throw new Error("HTTP error! Status: ".concat(r.status));const{data:s}=await r.json(),d=((i=s==null?void 0:s.getSlideList)==null?void 0:i.items)||[];this.slidesData=d.filter(l=>l.pages.includes(this.page)).sort((l,T)=>l.sortOrder-T.sortOrder),this.totalSlides=this.slidesData.length}catch(r){this.error=r.message}}setupEventListeners(){var i;const t=this.renderRoot.querySelector(".slides");if(!t){this.retryAttempts<this.maxRetryAttempts&&((i=this.slidesData)==null?void 0:i.length)>0&&(this.retryAttempts++,setTimeout(()=>this.setupEventListeners(),100));return}this.retryAttempts=0,this.removeEventListeners(),window.matchMedia("(pointer: coarse)").matches?(t.addEventListener("touchstart",this.dragStart.bind(this),{passive:!1}),t.addEventListener("touchmove",this.dragMove.bind(this),{passive:!1}),t.addEventListener("touchend",this.dragEnd.bind(this)),t.addEventListener("touchcancel",this.dragEnd.bind(this))):(t.addEventListener("pointerdown",this.dragStart.bind(this),{passive:!1}),t.addEventListener("pointermove",this.dragMove.bind(this),{passive:!1}),t.addEventListener("pointerup",this.dragEnd.bind(this)),t.addEventListener("pointercancel",this.dragEnd.bind(this)))}removeEventListeners(){const t=this.renderRoot.querySelector(".slides");t&&(t.removeEventListener("touchstart",this.dragStart.bind(this)),t.removeEventListener("touchmove",this.dragMove.bind(this)),t.removeEventListener("touchend",this.dragEnd.bind(this)),t.removeEventListener("touchcancel",this.dragEnd.bind(this)),t.removeEventListener("pointerdown",this.dragStart.bind(this)),t.removeEventListener("pointermove",this.dragMove.bind(this)),t.removeEventListener("pointerup",this.dragEnd.bind(this)),t.removeEventListener("pointercancel",this.dragEnd.bind(this)))}showSlide(t){const e=Math.max(0,this.totalSlides-this.visibleSlides);t=Math.max(0,Math.min(t,e));const i=this.renderRoot.querySelector(".slides");if(i){i.style.transition="transform 0.3s ease";const r=-t*this.slideWidth;i.style.transform="translateX(".concat(r,"px)")}this.currentSlide=t,this.prevTranslate=-t*this.slideWidth,this.style.setProperty("--left-shadow-opacity",this.currentSlide>0?"1":"0"),this.style.setProperty("--right-shadow-opacity",this.currentSlide<this.totalSlides-this.visibleSlides?"1":"0"),this.requestUpdate()}dragStart(t){if(t.target.closest("a"))return;this.isDragging=!0;const e=this.renderRoot.querySelector(".slides");e&&(e.style.transition="none"),t.type.startsWith("touch")?this.startX=t.touches[0].clientX:(this.startX=t.clientX,typeof t.pointerId<"u"&&(e==null||e.setPointerCapture(t.pointerId)))}dragMove(t){if(!this.isDragging)return;let e;t.type.startsWith("touch")?(e=t.touches[0].clientX,t.preventDefault()):e=t.clientX;const i=e-this.startX;let r=this.prevTranslate+i;r=Math.min(0,Math.max(-this.maxTranslate,r)),this.currentTranslate=r;const s=this.renderRoot.querySelector(".slides");s&&(s.style.transform="translateX(".concat(this.currentTranslate,"px)"))}dragEnd(t){if(!this.isDragging)return;this.isDragging=!1;const e=this.renderRoot.querySelector(".slides");!t.type.startsWith("touch")&&typeof t.pointerId<"u"&&(e==null||e.releasePointerCapture(t.pointerId));let i;t.type.startsWith("touch")?i=t.changedTouches[0].clientX:i=t.clientX;const r=i-this.startX;if(Math.abs(r)<this.dragThreshold){const s=this.renderRoot.elementFromPoint(i,t.type.startsWith("touch")?t.changedTouches[0].clientY:t.clientY);s&&!s.closest("a")&&setTimeout(()=>s.click(),0)}else{const s=Math.max(0,this.totalSlides-this.visibleSlides);r<-this.slideChangeThreshold&&this.currentSlide<s?this.currentSlide++:r>this.slideChangeThreshold&&this.currentSlide>0&&this.currentSlide--}this.showSlide(this.currentSlide)}handleNavigate(t){if(!window.TMA||typeof window.TMA.navigate!="function"){console.warn("TMA.navigate is not available");return}const{NavigateVar:e,NavigateParams:i,OptionalHref:r}=t;try{if(i&&typeof i=="string"&&i.startsWith("game/")){const s=i.split("/");if(s.length===3&&s[1]&&s[2]){const[,d,l]=s;window.TMA.navigate("GAME",{gameStudio:d,gameSlug:l});return}}if(e&&e!=="NULL"&&e!=="null"){window.TMA.navigate(e);return}console.debug("No TMA navigation triggered, relying on OptionalHref:",r)}catch(s){console.error("Error processing navigation:",s)}}renderSlide(t){const e="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(t.image.path));"https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(t.imageMobile.path));const i=o(m||(m=a(['\n      <div class="slide-content">\n        <img src=',' alt="Slide Image" loading="lazy" />\n        ',"\n      </div>\n    "])),e,t.OptionalHref?o(f||(f=a(["\n              <a\n                href=","\n                aria-label=",'\n                draggable="false"\n                @click=',"\n              ></a>\n            "])),t.OptionalHref,t.caption||"Navigate to slide link",r=>{window.location.href!==t.OptionalHref&&(window.location.href=t.OptionalHref)}):"");return o(y||(y=a(['\n      <div class="slide">\n        ',"\n      </div>\n    "])),t.OptionalHref?o(b||(b=a(["",""])),i):o(v||(v=a(["\n              <div @click=",">\n                ","\n              </div>\n            "])),()=>this.handleNavigate(t),i))}render(){return this.error?o(S||(S=a(['\n        <div class="error-message">\n          <p>Error fetching slides: ',"</p>\n        </div>\n      "])),this.error):!this.slidesData||this.slidesData.length===0?o(w||(w=a(['\n        <div class="no-slides-message">\n          <p></p>\n        </div>\n      ']))):o(E||(E=a(['\n      <div class="carousel">\n        <div class="slides">\n          ',"\n        </div>\n        ","\n      </div>\n    "])),this.slidesData.map(t=>this.renderSlide(t)),this.totalSlides>this.visibleSlides?o(x||(x=a(['\n              <button\n                class="nav-button prev"\n                @click=','\n                aria-label="Previous slide"\n                ?disabled=','\n              >\n                ❮\n              </button>\n              <button\n                class="nav-button next"\n                @click=','\n                aria-label="Next slide"\n                ?disabled=',"\n              >\n                ❯\n              </button>\n            "])),()=>{this.currentSlide>0&&this.showSlide(this.currentSlide-1)},this.currentSlide===0,()=>{this.currentSlide<this.totalSlides-this.visibleSlides&&this.showSlide(this.currentSlide+1)},this.currentSlide>=this.totalSlides-this.visibleSlides):"")}}h(c,"properties",{lang:{type:String,reflect:!0},page:{type:String,reflect:!0},slidesData:{type:Array,state:!0},error:{type:String,state:!0},currentSlide:{type:Number,state:!0},isDragging:{type:Boolean,state:!0},totalSlides:{type:Number,state:!0}}),h(c,"styles",M(g||(g=a(['\n    @font-face {\n      font-family: "Noto Sans Ambassadori";\n      font-style: normal;\n      font-display: swap;\n      src: url(https://usernamenotavailable12.github.io/Font-Repository/NotoSansAmbassadori-Regular.ttf);\n    }\n\n    :host {\n      display: block;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      --left-shadow-opacity: 0;\n      --right-shadow-opacity: 0;\n    }\n\n    .carousel {\n      width: 100%;\n      position: relative;\n      overflow: hidden;\n      user-select: none;\n    }\n\n    .carousel::before,\n    .carousel::after {\n      content: \'\';\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 50px;\n      z-index: 1;\n      pointer-events: none;\n      transition: opacity 0.3s ease;\n    }\n\n    .carousel::before {\n      left: 0;\n      background: linear-gradient(to right, rgba(0, 0, 0, 1), transparent);\n      opacity: var(--left-shadow-opacity);\n    }\n\n    .carousel::after {\n      right: 0;\n      background: linear-gradient(to left, rgba(0, 0, 0, 1), transparent);\n      opacity: var(--right-shadow-opacity);\n    }\n\n    .slides {\n      display: flex;\n      transition: transform 0.3s ease;\n      will-change: transform;\n      gap: 8px;\n      padding: 10px 0;\n    }\n\n    .slide {\n      flex: 0 0 180px;\n      height: 100%;\n      box-sizing: border-box;\n      position: relative;\n      cursor: grab;\n      border-radius: 8px;\n      overflow: hidden;\n    }\n\n    .slide img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      display: block;\n      user-drag: none;\n      -webkit-user-drag: none;\n      user-select: none;\n    }\n\n    .nav-button {\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      background: #cf167d;\n      color: white;\n      border: none;\n      padding: 8px;\n      cursor: pointer;\n      z-index: 10;\n      border-radius: 50%;\n      width: 28px;\n      height: 28px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 16px;\n    }\n\n    .nav-button:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n\n    .prev {\n      left: 8px;\n    }\n\n    .next {\n      right: 8px;\n    }\n\n    .slide a {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 10;\n      text-decoration: none;\n      color: transparent;\n      cursor: pointer;\n      pointer-events: auto;\n      user-drag: none;\n      -webkit-user-drag: none;\n      draggable: false;\n      touch-action: auto;\n    }\n\n    picture {\n      position: relative;\n      z-index: 1;\n    }\n\n    .slide-content::before {\n      content: "";\n      position: absolute;\n      display: block !important;\n      inset: 0;\n      padding: 2px;\n      border-radius: 8px;\n      background: linear-gradient(180deg, #FCA21E -38.69%, #FF84E6 125%);\n      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n      -webkit-mask-composite: xor;\n      mask-composite: exclude;\n      pointer-events: none;\n    }\n  ']))));customElements.define("promo-carousel",c);export{D as __vite_legacy_guard};
//# sourceMappingURL=promo-carousel.js.map
