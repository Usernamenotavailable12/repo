var u=Object.freeze,f=Object.defineProperty,P=(n,t,r)=>t in n?f(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,m=(n,t,r)=>P(n,"symbol"!=typeof t?t+"":t,r),l=(n,t)=>u(f(n,"raw",{value:u(t||n.slice())}));function C(){import.meta.url,import("_").catch((()=>1)),async function*(){}().next()}const{LitElement:$,html:g,css:L,unsafeHTML:n}=window.Lit;var y,w,x,k,z;class S extends ${static get properties(){return{data:{type:Object,attribute:!1},points:{type:Number,attribute:!1},maxPoints:{type:Number,attribute:!1},language:{type:String,attribute:!1},isLoggedIn:{type:Boolean,attribute:!1},configid:{type:String},_initialized:{type:Boolean,state:!0},hasScrollLeft:{type:Boolean,state:!0},hasScrollRight:{type:Boolean,state:!0}}}constructor(){var n;super(),this.data={},this.points=0,this.maxPoints=0,this.language="en",this.configid=!1,this.isLoggedIn=void 0!==(null==(n=extractAuthDataFromCookie())?void 0:n.userId),this._initialized=!1,this.hasScrollLeft=!1,this.hasScrollRight=!1}getDateBasedValue(){const n=this.data;if(null==n||!n.dateValues)return"0";const t=new Date,r=new Date(t.getTime()+144e5).toISOString().slice(0,16).replace("T"," ");for(const t of n.dateValues)if(r>=t.startDate&&r<=t.endDate)return t.segmentId;return"0"}async getProgressBarPoints(){var n,t,r,e;const o=this.getDateBasedValue(),i=extractAuthDataFromCookie();if(!i)return 0;try{return(null==(e=null==(r=null==(t=null==(n=(await fetchGraphQL("\n          query UserTournamentConnection($userId: ID, $tournamentId: ID) {\n            userTournamentConnection(userId: $userId, tournamentId: $tournamentId) {\n              edges {\n                node {\n                  points\n                }\n              }\n            }\n          }\n        ",{userId:i.userId,tournamentId:o})).data)?void 0:n.userTournamentConnection)?void 0:t.edges[0])?void 0:r.node)?void 0:e.points)||0}catch(n){return console.error("Error fetching progress data:",n),0}}async connectedCallback(){super.connectedCallback(),this._initialized||(await this._initializeData(),this._initialized=!0)}async _initializeData(){const n=document.querySelector("#".concat(this.configid));if(n)try{this.data=JSON.parse(n.textContent),this.maxPoints=this.data.breakpoints.reduce(((n,t)=>Math.max(n,t.to)),0)}catch(n){console.error("Error parsing JSON data:",n),this.data={}}this.language=document.documentElement.lang,this.points=await this.getProgressBarPoints(),this.requestUpdate()}getProgressBarItemsPosition(n){var t;return 100-(100/(null==(t=this.data.breakpoints)?void 0:t.length)||0)*(n+1)}getProgressPercentage(){var n,t;if(this.points>this.maxPoints)return 100;if(0===this.maxPoints)return 0;const r=100/(null==(n=this.data.breakpoints)?void 0:n.length)||0;let e=0;return null==(t=this.data.breakpoints)||t.forEach(((n,t)=>{this.points>=n.from&&this.points<=n.to&&(e=r*t+(this.points-n.from)/(n.to-n.from)*r)})),e}updateScrollState(){const n=this.shadowRoot.querySelector(".cba");if(n){const t=n.scrollLeft,r=n.scrollWidth,e=n.clientWidth;this.hasScrollLeft=t>2,this.hasScrollRight=t+e+2<r}}scrollLeft(){const n=this.shadowRoot.querySelector(".cba");if(n){const t=getComputedStyle(this.shadowRoot.host).getPropertyValue("--progress-item-width").trim(),r=parseFloat(t);n.scrollBy({left:-r,behavior:"smooth"}),setTimeout((()=>this.updateScrollState()),300)}}scrollRight(){const n=this.shadowRoot.querySelector(".cba");if(n){const t=getComputedStyle(this.shadowRoot.host).getPropertyValue("--progress-item-width").trim(),r=parseFloat(t);n.scrollBy({left:r,behavior:"smooth"}),setTimeout((()=>this.updateScrollState()),300)}}firstUpdated(){super.firstUpdated(),this.updateScrollState(),document.addEventListener("user:login",(()=>{this.isLoggedIn=!0,this.getProgressBarPoints().then((n=>{this.points=n,this.requestUpdate()}))})),document.addEventListener("user:logout",(()=>{this.isLoggedIn=!1,this.points=0,this.requestUpdate()}));const n=this.shadowRoot.querySelector(".cba"),t=this.shadowRoot.querySelector(".active-bar");if(n&&t){const r=()=>{n.getBoundingClientRect(),t.getBoundingClientRect();const r=t.offsetLeft-n.offsetLeft-n.clientWidth/2+t.clientWidth/2;n.scrollTo({left:r,behavior:"smooth"})},e=n=>{"left"===n.propertyName&&(r(),t.removeEventListener("transitionend",e))};t.addEventListener("transitionend",e)}n.addEventListener("scroll",(()=>this.updateScrollState()));const r=new ResizeObserver((()=>this.updateScrollState()));r.observe(n),this._resizeObserver=r}render(){var t,r,e,o,i,a,s,c,d,v;return g(z||(z=l(['\n      <div class="prodedushka">\n        <div\n          class="scroll-left"\n          style="opacity: ',';"\n        >\n          <button @click="','">\n            <img\n              src="https://images.takeshape.io/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/2db8c163-5099-4ac5-abd7-f21a7a0b27f8/arrow-left.svg"\n            />\n          </button>\n        </div>\n        <div\n          class="scroll-right"\n          style="opacity: ','"\n        >\n          <button @click="','">\n            <img\n              src="https://images.takeshape.io/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/8d7d55e7-5ea4-4431-a0e3-e56f2a80ac3f/arrow-left.svg"\n            />\n          </button>\n        </div>\n\n        <div\n          class="logincomponent"\n          style=',"\n        >\n          ",'\n        </div>\n\n        <div\n          class="complete-component"\n          style=',"\n        >\n          ",'\n        </div>\n\n        <div\n          class="cba"\n          tabindex="-1"\n          style="--pt: ','%"\n        >\n          ','\n          <div\n            style="--breakpoint-length: ','"\n            class="progress-bar-builder-cont"\n          >\n            <div class="progress-title">\n              <div class="uptitle-text">\n                ','\n              </div>\n\n              <div class="abs">\n                ','\n              </div>\n            </div>\n\n            <div class="progress-container">\n              <div class="active-progress-container">\n                <div\n                  style="width: ','%"\n                  class="active-progress"\n                ></div>\n              </div>\n\n              <div\n                class="active-bar"\n                style="left: max(var(--min-left-side), ','%)"\n              >\n                ',' â‚¾\n              </div>\n\n              <div class="abs">\n                ','\n              </div>\n            </div>\n\n            <div class="progress-bottom">\n              <div class="bottomtitle-text">\n                ','\n              </div>\n\n              <div class="abs">\n                ',"\n              </div>\n            </div>\n          </div>\n          ","\n        </div>\n      </div>\n    "])),this.hasScrollLeft?"1":"0",(()=>this.scrollLeft()),this.hasScrollRight?"1":"0",(()=>this.scrollRight()),this.isLoggedIn?"opacity: 0; pointer-events: none;":"opacity: 1;",n((null==(t=this.data.components)?void 0:t.logoutComponent[this.language])||""),this.points>=this.maxPoints?"visibility: visible;":"visibility: hidden; pointer-events: none;",n((null==(r=this.data.components)?void 0:r.complateComponent[this.language])||""),this.getProgressPercentage(),n((null==(e=this.data.components)?void 0:e.beforeComponent)||""),(null==(o=this.data.breakpoints)?void 0:o.length)||0,n(null==(i=this.data.components)?void 0:i.upTitleContent[this.language]),null==(a=this.data.breakpoints)?void 0:a.map(((t,r)=>g(w||(w=l(['<div\n                      style="right: ','%"\n                    >\n                      ',"\n                    </div>"])),this.getProgressBarItemsPosition(r),n(t.topContent)))),this.getProgressPercentage(),this.getProgressPercentage(),this.points,null==(s=this.data.breakpoints)?void 0:s.map(((t,r)=>g(x||(x=l(['<div\n                      style="right: ','%"\n                    >\n                      ',"\n                    </div>"])),this.getProgressBarItemsPosition(r),n(t.barckepointContent)))),n(null==(c=this.data.components)?void 0:c.bottomTitleContent[this.language]),null==(d=this.data.breakpoints)?void 0:d.map(((t,r)=>g(k||(k=l(['<div\n                      style="right: ','%"\n                    >\n                      ',"\n                    </div>"])),this.getProgressBarItemsPosition(r),n(t.bottomContent)))),n((null==(v=this.data.components)?void 0:v.afterComponent)||""))}}m(S,"styles",L(y||(y=l(['\n    .prodedushka {\n      position: var(--host-position);\n    }\n\n    .progress-container {\n      height: var(--progress-height);\n      background-color: var(--progress-background-color);\n      border-radius: var(--progress-border-radius);\n      border: var(--progress-border-width) solid var(--progress-border-color);\n      z-index: var(--progress-container-z-index);\n      position: var(--progress-container-position);\n    }\n\n    .progress-container .active-progress {\n      width: var(--active-progress-width);\n      height: var(--active-progress-height);\n      background-color: var(--progress-active-color);\n      border-radius: inherit;\n      transition: width var(--progress-transition-duration)\n        var(--progress-transition-easing);\n      z-index: var(--progress-active-z-index);\n      inset: var(--active-progress-inset);\n      position: var(--active-progress-position);\n    }\n\n    .progress-container .active-progress::before {\n      content: "";\n      position: absolute;\n      inset: 0;\n      background: var(--grad-mask-abc);\n      clip-path: polygon(0 0, var(--pt) 0, var(--pt) 100%, 0% 100%);\n    }\n\n    .progress-container,\n    .progress-bottom,\n    .progress-title {\n      display: var(--progress-container-display);\n      flex-direction: var(--progress-container-flex-direction);\n      min-height: var(--progress-min-height);\n      position: var(--progress-container-position);\n      box-sizing: var(--progress-container-box-sizing);\n      height: var(--progress-container-height);\n    }\n\n    .abs > :last-child {\n      transform: var(--abs-last-child-transform);\n    }\n\n    .abs {\n      position: var(--abs-position);\n      inset: var(--abs-inset);\n      display: var(--abs-display);\n    }\n\n    .abs > * {\n      position: var(--abs-child-position);\n      transform: var(--abs-child-transform);\n    }\n\n    .active-progress-container {\n      position: var(--active-progress-container-position);\n      width: var(--active-progress-container-width);\n      height: var(--active-progress-container-height);\n      border-radius: inherit;\n      overflow: var(--active-progress-container-overflow);\n      transform: var(--active-progress-container-transform);\n    }\n\n    .progress-text-container {\n      display: var(--progress-text-container-display);\n      gap: var(--progress-item-gap);\n      align-items: var(--progress-text-container-align-items);\n    }\n\n    .progress-bar-builder-cont {\n      min-width: calc(var(--progress-item-width) * var(--breakpoint-length, 5));\n      width: var(--progress-bar-builder-cont-width);\n      display: flex;\n      flex-direction: column;\n      gap: var(--progress-item-gap);\n    }\n\n    .cba {\n      display: var(--cba-display);\n      overflow-x: var(--cba-overflow-x);\n      scrollbar-width: var(--cba-scrollbar-width);\n      scroll-behavior: var(--cba-scroll-behavior);\n      -ms-overflow-style: var(--cba-ms-overflow-style);\n      padding: var(--cba-padding);\n      overflow-y: hidden;\n    }\n\n    .cab::-webkit-scrollbar {\n      display: none;\n    }\n\n    .active-bar {\n      position: var(--active-bar-position);\n      top: var(--active-bar-top);\n      transform: var(--active-bar-transform);\n\n      display: var(--active-bar-display);\n      height: var(--active-bar-height);\n      padding: var(--active-bar-padding);\n      justify-content: var(--active-bar-justify-content);\n      align-items: var(--active-bar-align-items);\n      flex-shrink: var(--active-bar-flex-shrink);\n\n      border-radius: var(--active-bar-border-radius);\n      border: var(--active-bar-border);\n      background: var(--active-bar-background);\n\n      z-index: var(--active-bar-z-index);\n      transition: left var(--progress-transition-duration)\n        var(--progress-transition-easing);\n\n      color: var(--active-bar-color);\n      text-align: var(--active-bar-text-align);\n      font-family: var(--active-bar-font-family);\n      font-size: var(--active-bar-font-size);\n    }\n\n    .active-bar::after {\n      content: var(--active-bar-after-content);\n      background: var(--active-bar-after-background);\n      background-size: var(--active-bar-after-background-size);\n      background-position: var(--active-bar-after-background-position);\n      background-repeat: var(--active-bar-after-background-repeat);\n      position: var(--active-bar-after-position);\n      width: var(--active-bar-after-width);\n      right: var(--active-bar-after-right);\n      transform: var(--active-bar-after-transform);\n      height: var(--active-bar-after-height);\n    }\n\n    .scroll-left,\n    .scroll-right {\n      position: var(--scroll-position);\n      top: var(--scroll-top);\n      transform: var(--scroll-transform);\n      color: var(--scroll-color);\n      padding: var(--scroll-padding);\n      border-radius: var(--scroll-border-radius);\n      cursor: var(--scroll-cursor);\n      z-index: var(--scroll-z-index);\n      transition: var(--scroll-transition);\n\n      display: var(--scroll-display);\n      width: var(--scroll-width);\n      height: var(--scroll-height);\n      padding: var(--scroll-padding-vertical);\n      justify-content: var(--scroll-justify-content);\n      align-items: var(--scroll-align-items);\n      flex-shrink: var(--scroll-flex-shrink);\n    }\n\n    .scroll-left {\n      background: var(--scroll-left-background);\n      left: var(--scroll-left-left);\n    }\n    .scroll-right {\n      background: var(--scroll-right-background);\n      right: var(--scroll-right-right);\n    }\n\n    .scroll-left button,\n    .scroll-right button {\n      background-color: var(--scroll-button-background-color);\n      border: var(--scroll-button-border);\n      border-radius: var(--scroll-button-border-radius);\n      aspect-ratio: var(--scroll-button-aspect-ratio);\n      width: var(--scroll-button-width);\n      justify-content: var(--scroll-button-justify-content);\n      align-items: var(--scroll-button-align-items);\n      display: var(--scroll-button-display);\n      border: var(--scroll-button-border-none);\n      color: var(--scroll-button-color);\n    }\n    .scroll-right {\n      right: 0;\n    }\n\n    .logincomponent {\n      background: var(--login-component-background);\n      display: var(--login-component-display);\n      position: var(--login-component-position);\n      inset: var(--login-component-inset);\n      justify-content: var(--login-component-justify-content);\n      align-items: var(--login-component-align-items);\n      z-index: var(--login-component-z-index);\n      transition: var(--login-component-transition);\n\n      backdrop-filter: var(--login-component-backdrop-filter);\n    }\n\n    .complete-component {\n      background: var(--complete-component-background);\n      display: var(--complete-component-display);\n      position: var(--complete-component-position);\n      inset: var(--complete-component-inset);\n      justify-content: var(--complete-component-justify-content);\n      align-items: var(--complete-component-align-items);\n      z-index: var(--complete-component-z-index);\n      transition: var(--complete-component-transition);\n\n      backdrop-filter: var(--complite-component-backdrop-filter);\n    }\n\n    .complitecomponent,\n    .logoutcomponent {\n      inset: 0;\n      box-sizing: border-box;\n      position: absolute;\n      display: flex;\n      gap: var(--gap-large);\n      color: var(--color-white);\n      font-family: var(--font-family);\n      font-size: var(--font-size-base);\n      align-items: center;\n      justify-content: center;\n      padding: var(--padding-container);\n      backdrop-filter: var(--logout-component-backdrop-filter);\n    }\n\n    .buttoncomponent {\n      display: flex;\n      gap: var(--gap-medium);\n      flex-wrap: wrap;\n      justify-content: center;\n    }\n\n    .loginbutton {\n      border-radius: var(--border-radius);\n      background: var(--gradient-pink);\n      box-shadow: var(--box-shadow);\n      padding: var(--padding-button);\n      justify-content: center;\n      align-items: center;\n      width: var(--button-width);\n      border: none;\n      font-size: var(--font-size-base);\n      color: var(--color-white);\n      font-family: var(--font-family);\n    }\n\n    .registerbutton {\n      border-radius: var(--border-radius);\n      background: var(--gradient-green);\n      box-shadow: var(--box-shadow);\n      padding: var(--padding-button);\n      justify-content: center;\n      align-items: center;\n      width: var(--button-width);\n      border: none;\n      font-size: var(--font-size-base);\n      color: var(--color-white);\n      font-family: var(--font-family);\n    }\n\n    .bottomtitlecomponent {\n      color: var(--color-white);\n      font-family: var(--font-family);\n      font-size: var(--font-size-small);\n    }\n\n    .uptitlecomponent {\n      color: var(--color-white);\n      font-family: var(--font-family);\n      font-size: var(--font-size-small);\n    }\n  '])))),customElements.define("progressbar-builder",S);export{C as __vite_legacy_guard};