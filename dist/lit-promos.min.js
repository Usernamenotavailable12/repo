var S=Object.freeze,x=Object.defineProperty,z=(t,e,n)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m=(t,e,n)=>z(t,"symbol"!=typeof e?e+"":e,n),a=(t,e)=>S(x(t,"raw",{value:S(e||t.slice())}));function O(){import.meta.url,import("_").catch((()=>1)),async function*(){}().next()}const{LitElement:C,html:n,css:X}=window.Lit;var E,T,k,L,M,P,$,R,A,D,N;class b extends C{constructor(){super(),this.lang=this.getQueryParam("lang","en"),this.page=this.getQueryParam("page","home"),this.slidesData=[],this.error=null,this.currentSlide=0,this.isDragging=!1,this.totalSlides=0,this.startX=0,this.currentTranslate=0,this.prevTranslate=0,this.slideWidth=188,this.visibleSlides=3,this.maxTranslate=0,this.dragThreshold=20,this.slideChangeThreshold=50,this.retryAttempts=0,this.maxRetryAttempts=10}createRenderRoot(){const t=this.attachShadow({mode:"open"}),e=document.createElement("style");return e.textContent=this.constructor.styles.toString(),t.appendChild(e),t}connectedCallback(){super.connectedCallback(),this.fetchSlides(),window.addEventListener("resize",this.handleResize.bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListeners(),window.removeEventListener("resize",this.handleResize.bind(this))}firstUpdated(){var t;(null==(t=this.slidesData)?void 0:t.length)>0&&(this.updateMaxTranslate(),this.showSlide(this.currentSlide),this.setupEventListeners(),this.setupPopupHover())}updated(t){var e;(null==(e=this.slidesData)?void 0:e.length)>0&&(this.setupEventListeners(),this.setupPopupHover(),this.updateMaxTranslate(),this.updateShadowOpacity())}updateShadowOpacity(){this.style.setProperty("--left-shadow-opacity",this.currentSlide>0?"1":"0"),this.style.setProperty("--right-shadow-opacity",this.currentSlide<this.totalSlides-this.visibleSlides?"1":"0")}handleResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((()=>{this.updateMaxTranslate(),this.showSlide(this.currentSlide),this.setupPopupHover()}),100)}updateMaxTranslate(){const t=this.renderRoot.querySelector(".carousel");if(!t)return;const e=t.offsetWidth;this.visibleSlides=Math.floor(e/this.slideWidth),this.maxTranslate=Math.max(0,(this.totalSlides-this.visibleSlides)*this.slideWidth)}setupPopupHover(){const t=this.renderRoot.querySelector(".carousel"),e=this.renderRoot.querySelector(".popup");this.renderRoot.querySelectorAll(".slider-holder").forEach(((n,i)=>{const s=this.slidesData[i],a="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(s.imageMobile.path)),r=()=>{const i=t.getBoundingClientRect(),s=n.getBoundingClientRect(),r=window.innerWidth;let o=s.left-i.left+s.width/2-185.5;const l=i.left+o;l<10?o=10-i.left:l+371>r-10&&(o=r-10-371-i.left),t.style.setProperty("--hovered-background",'url("'.concat(a,'")')),e.style.left="".concat(o,"px"),e.style.opacity="1"},o=()=>{t.style.removeProperty("--hovered-background"),e.style.opacity="0"};n.removeEventListener("mouseenter",r),n.removeEventListener("mouseleave",o),n.addEventListener("mouseenter",r),n.addEventListener("mouseleave",o)}))}getQueryParam(t,e=""){return new URLSearchParams(window.location.search).get(t)||e}fixUrl(t){return t.replace(/ /g,"%20")}async fetchSlides(){var t;try{const e=await fetch("https://cdn.takeshape.io/project/5da2b4d5-59f6-412a-82c3-f6a272b532be/production/graphql",{method:"POST",headers:{"Content-Type":"application/json","X-TakeShape-Token":"dde685a904334d79915c7a9f31860f36"},body:JSON.stringify({query:"\n            query GetSlides($locale: String!) {\n              getSlideList(locale: $locale, onlyEnabled: true, size: 200) {\n                items {\n                  caption\n                  pages\n                  sortOrder\n                  NavigateVar\n                  OptionalHref\n                  NavigateParams\n                  image {\n                    path\n                  }\n                  imageMobile {\n                    path\n                  }\n                  imagePromos {\n                    path\n                  }\n                }\n              }\n            }\n          ",variables:{locale:this.lang}})});if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));const{data:n}=await e.json(),i=(null==(t=null==n?void 0:n.getSlideList)?void 0:t.items)||[];this.slidesData=i.filter((t=>t.pages.includes(this.page))).sort(((t,e)=>t.sortOrder-e.sortOrder)),this.totalSlides=this.slidesData.length,this.requestUpdate()}catch(t){this.error=t.message,this.requestUpdate()}}setupEventListeners(){var t;const e=this.renderRoot.querySelector(".slides");e?(this.retryAttempts=0,this.removeEventListeners(),window.matchMedia("(pointer: coarse)").matches?(e.addEventListener("touchstart",this.dragStart.bind(this),{passive:!1}),e.addEventListener("touchmove",this.dragMove.bind(this),{passive:!1}),e.addEventListener("touchend",this.dragEnd.bind(this)),e.addEventListener("touchcancel",this.dragEnd.bind(this))):(e.addEventListener("pointerdown",this.dragStart.bind(this),{passive:!1}),e.addEventListener("pointermove",this.dragMove.bind(this),{passive:!1}),e.addEventListener("pointerup",this.dragEnd.bind(this)),e.addEventListener("pointercancel",this.dragEnd.bind(this)))):this.retryAttempts<this.maxRetryAttempts&&(null==(t=this.slidesData)?void 0:t.length)>0&&(this.retryAttempts++,setTimeout((()=>this.setupEventListeners()),100))}removeEventListeners(){const t=this.renderRoot.querySelector(".slides");t&&(t.removeEventListener("touchstart",this.dragStart.bind(this)),t.removeEventListener("touchmove",this.dragMove.bind(this)),t.removeEventListener("touchend",this.dragEnd.bind(this)),t.removeEventListener("touchcancel",this.dragEnd.bind(this)),t.removeEventListener("pointerdown",this.dragStart.bind(this)),t.removeEventListener("pointermove",this.dragMove.bind(this)),t.removeEventListener("pointerup",this.dragEnd.bind(this)),t.removeEventListener("pointercancel",this.dragEnd.bind(this)))}showSlide(t){const e=Math.max(0,this.totalSlides-this.visibleSlides);t=Math.max(0,Math.min(t,e));const n=this.renderRoot.querySelector(".slides");if(n){n.style.transition="transform 0.3s ease";const e=-t*this.slideWidth;n.style.transform="translateX(".concat(e,"px)")}this.currentSlide=t,this.prevTranslate=-t*this.slideWidth,this.updateShadowOpacity(),this.requestUpdate()}dragStart(t){if(t.target.closest("a"))return;this.isDragging=!0;const e=this.renderRoot.querySelector(".slides");e&&(e.style.transition="none"),t.type.startsWith("touch")?this.startX=t.touches[0].clientX:(this.startX=t.clientX,typeof t.pointerId<"u"&&(null==e||e.setPointerCapture(t.pointerId)))}dragMove(t){if(!this.isDragging)return;let e;t.type.startsWith("touch")?(e=t.touches[0].clientX,t.preventDefault()):e=t.clientX;const n=e-this.startX;let i=this.prevTranslate+n;i=Math.min(0,Math.max(-this.maxTranslate,i)),this.currentTranslate=i;const s=this.renderRoot.querySelector(".slides");s&&(s.style.transform="translateX(".concat(this.currentTranslate,"px)"))}dragEnd(t){if(!this.isDragging)return;this.isDragging=!1;const e=this.renderRoot.querySelector(".slides");let n;!t.type.startsWith("touch")&&typeof t.pointerId<"u"&&(null==e||e.releasePointerCapture(t.pointerId)),n=t.type.startsWith("touch")?t.changedTouches[0].clientX:t.clientX;const i=n-this.startX;if(Math.abs(i)<this.dragThreshold){const e=this.renderRoot.elementFromPoint(n,t.type.startsWith("touch")?t.changedTouches[0].clientY:t.clientY);e&&!e.closest("a")&&setTimeout((()=>e.click()),0)}else{const t=Math.max(0,this.totalSlides-this.visibleSlides);i<-this.slideChangeThreshold&&this.currentSlide<t?this.currentSlide++:i>this.slideChangeThreshold&&this.currentSlide>0&&this.currentSlide--}this.showSlide(this.currentSlide)}handleNavigate(t){if(!window.TMA||"function"!=typeof window.TMA.navigate)return;const{NavigateVar:e,NavigateParams:n,OptionalHref:i}=t;try{if(n&&"string"==typeof n&&n.startsWith("game/")){const t=n.split("/");if(3===t.length&&t[1]&&t[2]){const[,e,n]=t;return void window.TMA.navigate("GAME",{gameStudio:e,gameSlug:n})}}if(e&&"NULL"!==e&&"null"!==e)return void window.TMA.navigate(e);console.debug("No TMA navigation triggered, relying on OptionalHref:",i)}catch(t){console.error("Error processing navigation:",t)}}renderSlide(t){const e="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(t.imagePromos&&t.imagePromos.path?t.imagePromos.path:t.image.path)),i="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(t.imageMobile.path)),s=n(k||(k=a(["\n      <div\n        style=\"--hover-image: url('",'\')"\n        class="slide-content"\n      >\n        <img src=',' alt="Slide Image" loading="lazy" />\n        ',"\n      </div>\n    "])),i,e,t.OptionalHref?n(T||(T=a(["\n              <a\n                href=","\n                aria-label=",'\n                draggable="false"\n                @click=',"\n              ></a>\n            "])),t.OptionalHref,t.caption||"Navigate to slide link",(e=>{var n,i,s;if(e.preventDefault(),e.stopPropagation(),null!=(n=t.NavigateParams)&&n.startsWith("game/")){const e=t.NavigateParams.split("/");if(3===e.length&&e[1]&&e[2]&&null!=(i=window.TMA)&&i.navigate){const[,t,n]=e;return void window.TMA.navigate("GAME",{gameStudio:t,gameSlug:n})}}t.NavigateVar&&"NULL"!==t.NavigateVar&&"null"!==t.NavigateVar&&null!=(s=window.TMA)&&s.navigate?window.TMA.navigate(t.NavigateVar):window.location.href!==t.OptionalHref&&(history.pushState({},"",t.OptionalHref),window.dispatchEvent(new Event("popstate")))})):"");return n(P||(P=a(['\n      <div class="slide">\n        ',"\n      </div>\n    "])),t.OptionalHref?n(L||(L=a(["",""])),s):n(M||(M=a(["\n              <div @click=",">","</div>\n            "])),(()=>this.handleNavigate(t)),s))}render(){return this.error?n($||($=a(['\n        <div class="error-message">\n          <p>Error fetching slides: ',"</p>\n        </div>\n      "])),this.error):this.slidesData&&0!==this.slidesData.length?n(N||(N=a(['\n      <div class="carousel">\n        <div class="slides-container">\n          <div class="slides">\n            ','\n          </div>\n        </div>\n        <div class="popup">\n          <div class="popup-background"></div>\n        </div>\n        ',"\n      </div>\n    "])),this.slidesData.map((t=>n(A||(A=a(['\n                <div class="slider-holder">',"</div>\n              "])),this.renderSlide(t)))),this.totalSlides>this.visibleSlides?n(D||(D=a(['\n              <button\n                class="nav-button prev"\n                @click=','\n                aria-label="Previous slide"\n                ?disabled=','\n              >\n                ❮\n              </button>\n              <button\n                class="nav-button next"\n                @click=','\n                aria-label="Next slide"\n                ?disabled=',"\n              >\n                ❯\n              </button>\n            "])),(()=>{this.currentSlide>0&&this.showSlide(this.currentSlide-1)}),0===this.currentSlide,(()=>{this.currentSlide<this.totalSlides-this.visibleSlides&&this.showSlide(this.currentSlide+1)}),this.currentSlide>=this.totalSlides-this.visibleSlides):""):n(R||(R=a(['\n        <div class="no-slides-message">\n          <p></p>\n        </div>\n      '])))}}m(b,"properties",{lang:{type:String,reflect:!0},page:{type:String,reflect:!0},slidesData:{type:Array,state:!0},error:{type:String,state:!0},currentSlide:{type:Number,state:!0},isDragging:{type:Boolean,state:!0},totalSlides:{type:Number,state:!0}}),m(b,"styles",X(E||(E=a(['\n    @font-face {\n      font-family: "Noto Sans Ambassadori";\n      font-style: normal;\n      font-display: swap;\n      src: url(https://usernamenotavailable12.github.io/Font-Repository/NotoSansAmbassadori-Regular.ttf);\n    }\n\n    :host {\n      display: block;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      --left-shadow-opacity: 0;\n      --right-shadow-opacity: 0;\n      --hovered-background: none;\n    }\n\n    .carousel {\n      width: 100%;\n      position: relative;\n      user-select: none;\n      box-sizing: border-box;\n      overflow: visible;\n    }\n\n    .slides-container {\n      overflow: hidden;\n      position: relative;\n    }\n\n    .slides {\n      display: flex;\n      transition: transform 0.3s ease;\n      will-change: transform;\n      gap: 8px;\n      padding: 10px 0;\n    }\n\n    .carousel::before,\n    .carousel::after {\n      content: "";\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 50px;\n      z-index: 100;\n      pointer-events: none;\n      transition: opacity 0.3s ease;\n    }\n\n    .carousel::before {\n      left: 0;\n      background: linear-gradient(to right, rgba(0, 0, 0, 1), transparent);\n      opacity: var(--left-shadow-opacity);\n    }\n\n    .carousel::after {\n      right: 0;\n      background: linear-gradient(to left, rgba(0, 0, 0, 1), transparent);\n      opacity: var(--right-shadow-opacity);\n    }\n\n    .slide {\n      flex: 0 0 180px;\n      height: 100%;\n      box-sizing: border-box;\n      position: relative;\n      cursor: grab;\n      border-radius: 8px;\n      overflow: hidden;\n    }\n\n    .slide img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      display: block;\n      user-drag: none;\n      -webkit-user-drag: none;\n      user-select: none;\n      height: 50px;\n      width: 180px;\n    }\n\n    .nav-button {\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      background: #cf167d;\n      color: white;\n      border: none;\n      padding: 10px;\n      cursor: pointer;\n      z-index: 150;\n      border-radius: 50%;\n      width: 28px;\n      height: 28px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 16px;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n\n    .carousel:hover .nav-button {\n      opacity: 1;\n    }\n\n    .nav-button:disabled {\n      opacity: 0;\n      cursor: not-allowed;\n    }\n\n    .carousel:hover .nav-button:disabled {\n      opacity: 0;\n      cursor: not-allowed;\n    }\n\n    .prev {\n      left: 8px;\n    }\n\n    .next {\n      right: 8px;\n    }\n\n    .slide a {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 10;\n      text-decoration: none;\n      color: transparent;\n      cursor: pointer;\n      pointer-events: auto;\n      user-drag: none;\n      -webkit-user-drag: none;\n      draggable: false;\n      touch-action: auto;\n    }\n\n    picture {\n      position: relative;\n      z-index: 1;\n    }\n\n    .slide-content::before {\n      content: "";\n      position: absolute;\n      display: block !important;\n      inset: 0;\n      padding: 2px;\n      border-radius: 8px;\n      background: linear-gradient(180deg, #fca21e -38.69%, #ff84e6 125%);\n      -webkit-mask: linear-gradient(#fff 0 0) content-box,\n        linear-gradient(#fff 0 0);\n      -webkit-mask-composite: xor;\n      mask-composite: exclude;\n      pointer-events: none;\n    }\n\n    .popup {\n      position: absolute;\n      top: 100%;\n      left: 0;\n      z-index: 200;\n      pointer-events: none;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n      margin-top: 14px;\n      width: 371px;\n      height: 210px;\n    }\n\n    .popup:before {\n      content: "";\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: var(--hovered-background, none);\n      background-size: cover;\n      background-position: center;\n      border-radius: 20px;\n      padding: 3px;\n      z-index: 1;\n      scale: .98;\n      transform: translateX(-1px);\n    }\n\n    .popup:after {\n      content: "";\n      position: absolute;\n      top: 0;\n      left: 50%;\n      transform: translateX(-50%) translateY(-50%) rotate(45deg);\n      width: 20px;\n      height: 20px;\n      background: linear-gradient(328deg, #fca21e 50%, #ff84e6);\n      z-index: 0;\n    }\n\n    .popup-background {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: calc(100% - 4px);\n      background: linear-gradient(#FCA21E, #FF84E6);\n      z-index: 0;\n      border-radius: 20px;\n      padding-block: 5px;\n      padding-inline: 2px;\n    }\n\n    .slider-holder {\n      position: relative;\n    }\n  '])))),customElements.define("promo-carousel",b);export{O as __vite_legacy_guard};